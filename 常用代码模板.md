# 常用代码模板

# 1 ubuntu串口通讯

```c++
#include <boost/asio.hpp>               
#include <boost/bind.hpp>
using namespace boost::asio;
unsigned char buf1[10];
io_service iosev;
serial_port sp(iosev, "/dev/ttyUSB0");
unsigned char buf[7]={'w','t','r',50,50,50,0x00};
int main(int argc, char *argv[]) {
    sp.set_option(serial_port::baud_rate(9600));
    sp.set_option(serial_port::flow_control());
    sp.set_option(serial_port::parity());
    sp.set_option(serial_port::stop_bits());
    sp.set_option(serial_port::character_size(8));
    read(sp, buffer(buf1)); 
    write(sp, buffer(buf,7))
    return 0;
}
```

# 2 ros安装

```bash
sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu `lsb_release -sc` main" > /etc/apt/sources.list.d/ros-latest.list'
wget http://packages.ros.org/ros.key -O - | sudo apt-key add -
sudo apt-get update
sudo apt-get install ros-kinetic-desktop-full ros-kinetic-joy ros-kinetic-octomap-ros ros-kinetic-mavlink python-wstool python-catkin-tools protobuf-compiler libgoogle-glog-dev ros-kinetic-control-toolbox
sudo rosdep init
rosdep update
source /opt/ros/kinetic/setup.bash
```

# 3 CMakeList

```cmake
cmake_minimum_required(VERSION 2.8.3)
project(hist)
set(OpenCV_DIR /opt/ros/kinect/share/OpenCV-3.3.1-dev)
find_package(catkin REQUIRED COMPONENTS
  OpenCV REQUIRED
  roscpp
  rospy
  std_msgs
  
)

catkin_package(
)
  include ${catkin_INCLUDE_DIRS}
  ${catkin_INCLUDE_DIRS}
)



add_executable(subscriber
  src/subscriber.cpp include/myHist.h src/myHist.cpp)
add_dependencies(subscriber ${${PROJECT_NAME}_EXPORTED_TARGETS} ${catkin_EXPORTED_TARGETS})
target_link_libraries(subscriber 
  ${catkin_LIBRARIES} 
  ${OpenCV_LIBRARIES} )


```

